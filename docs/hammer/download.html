<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
    <head>
        <style>.style1
{
	font-family: Courier;
	font-size: 12;
}
.style10
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style11
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style12
{
	font-family: Arial;
	font-size: 13;
}
.style13
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style14
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style15
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style16
{
	font-family: Arial;
	font-size: 13;
}
.style17
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style18
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style19
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style2
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style20
{
	font-family: Arial;
	font-size: 13;
}
.style21
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style22
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style23
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style24
{
	font-family: Arial;
	font-size: 13;
}
.style25
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style26
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style27
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style28
{
	font-family: Arial;
	font-size: 13;
}
.style29
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style3
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style30
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style31
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style32
{
	font-family: Arial;
	font-size: 13;
}
.style33
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style34
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style35
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style36
{
	font-family: Arial;
	font-size: 13;
}
.style37
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style38
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style39
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style4
{
	font-family: Arial;
	font-size: 13;
}
.style40
{
	font-family: Arial;
	font-size: 13;
}
.style41
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style42
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style43
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style44
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}
.style45
{
	font-family: Arial;
	font-size: 13;
}
.style46
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style47
{
	font-family: Arial;
	font-size: 13;
}
.style48
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style49
{
	font-family: Arial;
	font-size: 13;
}
.style5
{
	font-family: Arial;
	font-size: 13;
	font-style: italic;
}
.style50
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style51
{
	font-family: Arial;
	font-size: 13;
}
.style52
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style53
{
	font-family: Arial;
	font-size: 13;
}
.style54
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style55
{
	font-family: Arial;
	font-size: 13;
}
.style56
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style57
{
	font-family: Arial;
	font-size: 13;
}
.style58
{
	font-family: Arial;
	font-size: 13;
	font-weight: bold;
}
.style59
{
	font-family: Arial;
	font-size: 13;
}
.style6
{
	font-family: Arial;
	font-size: 13;
}
.style7
{
	font-family: Arial;
	font-size: 13;
	font-style: italic;
}
.style8
{
	font-family: Arial;
	font-size: 13;
}
.style9
{
	font-family: Courier;
	font-size: 12;
	font-style: italic;
}

body
{
    white-space: pre-wrap;
}
</style>
    </head>
    <body><span class="style1">download "http://the-ageless.com" to cd fld 1
	for each chunk put "downloading"
	when done answer "download finished"

download </span><span class="style2">internetAddress</span><span class="style1"> to </span><span class="style3">globalContainer
</span><span class="style4">
This command starts a download of the contents of the URL given in </span><span class="style5">internetAddress</span><span class="style6"> and, as the data arrives over the network, progressively writes it into the container given in </span><span class="style7">globalContainer</span><span class="style8">. The download happens in the background, while other scripts continue executing, as such the container given must be one that exists beyond the duration of the current handler, like a global variable or a text field.
If you need to do something with the downloaded data besides displaying it in a text field, you can ask to be notified on completion in the following form:

</span><span class="style1">	download </span><span class="style9">internetAddress</span><span class="style1"> to </span><span class="style10">globalContainer</span><span class="style1"> when done </span><span class="style11">command

</span><span class="style12">or

</span><span class="style1">	download </span><span class="style13">internetAddress</span><span class="style1"> to </span><span class="style14">globalContainer</span><span class="style1">
		when done </span><span class="style15">command
</span><span class="style16">
or

</span><span class="style1">	download </span><span class="style17">internetAddress</span><span class="style1"> to </span><span class="style18">globalContainer</span><span class="style1">
	when done
		</span><span class="style19">commands</span><span class="style1">
	end download

</span><span class="style20">or

</span><span class="style1">	download </span><span class="style21">internetAddress</span><span class="style1"> to </span><span class="style22">globalContainer</span><span class="style1"> when done
		</span><span class="style23">commands</span><span class="style1">
	end download
</span><span class="style24">
Similarly, you can also be notified of the arrival of each new chunk of data, as it is transferred over the network:

</span><span class="style1">	download </span><span class="style25">internetAddress</span><span class="style1"> to </span><span class="style26">globalContainer</span><span class="style1"> for each chunk </span><span class="style27">command

</span><span class="style28">or

</span><span class="style1">	download </span><span class="style29">internetAddress</span><span class="style1"> to </span><span class="style30">globalContainer</span><span class="style1">
	for each chunk </span><span class="style31">command

</span><span class="style32">or

</span><span class="style1">	download </span><span class="style33">internetAddress</span><span class="style1"> to </span><span class="style34">globalContainer</span><span class="style1">
	for each chunk
		</span><span class="style35">commands</span><span class="style1">
	end download

</span><span class="style36">or

</span><span class="style1">	download </span><span class="style37">internetAddress</span><span class="style1"> to </span><span class="style38">globalContainer</span><span class="style1"> for each chunk
		</span><span class="style39">commands</span><span class="style1">
	end download
</span><span class="style40">
You can also combine both forms to be notified of each time new data arrives, and when the download has completed:

</span><span class="style1">	download </span><span class="style41">internetAddress</span><span class="style1"> to </span><span class="style42">globalContainer</span><span class="style1">
	for each chunk
		</span><span class="style43">commands</span><span class="style1">
	when done
		</span><span class="style44">commands</span><span class="style1">
	end download
</span><span class="style45">
etc.

</span><span class="style46">the download
</span><span class="style1">the download
the totalSize of the download
element "User-Agent" of the headers of the download
</span><span class="style47">
Additional information on a download that is in progress is available to code inside the for each chunk or when done sections through the the download array. Currently, it contains the following keys:

</span><span class="style48">totalSize</span><span class="style49">			The size the download will have when finished, in bytes. May be -1 to indicate we won’t know until the download has finished.
</span><span class="style50">size</span><span class="style51">				The amount of data downloaded so far, in bytes.
</span><span class="style52">statusCode</span><span class="style53">		The HTTP status code the web server returned, like 200 for success, or 404 for ‘file not found’.
</span><span class="style54">statusMessage</span><span class="style55">	A plain-text description of the statusCode, if available.
</span><span class="style56">address</span><span class="style57">			The URL of the file downloaded. This is the same as the internetAddress you gave to the download command.
</span><span class="style58">headers</span><span class="style59">			An array containing the headers in the reply from the server, with the header name as the key, and the header value is the value associated with that key.</span></body>
</html>
